using System;

internal class Program
{
    static void Main(string[] args)
    {
        string[,] map =
            { {"#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"},
              {"#","@"," "," "," "," ","#"," "," "," ","#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"," "," "," "," "," "," ","#","#","#"},
              {"#"," "," "," "," "," "," "," "," ","#","#"," ","#","#","#","#"," ","#","#","#"," ","#","#","#"," "," "," "," "," "," ","#"," ","#"," ","#","#","#","#","#","#"},
              {"#"," "," "," "," "," ","#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"},
              {"#","#"," "," ","#","#","#"," ","#","#","#","#","#"," ","#"," ","#","#"," "," "," ","#"," ","#","#","#","#","#","#"," ","#","#","#"," ","#","#"," ","#"," ","#"},
              {"#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"},
              {"#"," "," "," ","#"," ","#","#","#","#","#"," "," "," ","#"," "," ","#"," ","#","#","#"," ","#","#","#"," ","#"," "," ","#","#","#"," ","#"," ","#","#"," ","#"},
              {"#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"},
              {"#"," "," ","#","#"," ","#","#","#"," ","#"," ","#"," "," "," "," "," "," ","#","#"," "," ","#"," "," "," ","#","#","#","#","#","#","#","#","#","#","#"," ","#"},
              {"#"," "," ","#"," "," "," "," "," ","#"," "," ","#"," ","#","#","#","#","#","#","#"," ","#","#","#","#"," ","#"," ","#","#"," ","#","#"," ","#"," ","#"," ","#"},
              {"#"," "," ","#"," "," "," ","#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"},
              {"#"," "," ","#"," ","#","#","#"," ","#","#","#","#","#","#","#","#","#","#","#","#"," ","#"," "," ","#","#","#"," ","#","#"," ","#","#"," ","#","#"," "," ","#"},
              {"#"," "," "," "," "," "," "," "," ","#"," "," "," "," "," "," "," "," "," ","#"," "," ","#"," ","#","#"," ","#"," ","#","#"," ","#"," "," "," ","#"," "," ","#"},
              {"#"," "," "," "," ","#","#","#"," ","#"," "," "," "," ","#","#","#","#","#"," "," ","#","#"," "," "," "," "," "," "," "," "," ","#","#","#"," ","#"," "," ","#"},
              {"#"," "," ","#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"," ","#"," ","#","#","#","#","#"," ","#","#"," "," "," ","#"," ","#"," "," ","#"},
              {"#"," "," ","#"," "," "," ","#"," "," ","#","#","#","#","#","#","#","#"," ","#"," ","#"," ","#","#","#","#","#"," ","#","#"," ","#"," ","#"," ","#"," "," ","#"},
              {"#"," ","#","#","#","#","#","#","#","#","#"," "," "," "," "," "," ","#"," "," "," "," "," ","#","#","#","#","#"," "," ","#"," ","#"," "," "," "," ","#"," ","#"},
              {"#"," "," "," "," "," ","#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#"," ","#"},
              {"#","#","#","#"," "," ","#","#"," ","#","#","#"," ","#","#","#"," ","#","#","#"," ","#","#","#"," ","#","#","#","#"," ","#"," ","#"," ","#","#"," ","#","#","#"},
              {"#","#","#","#"," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," "," ","#","#","#"},
              {"#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#","#"}
            };

        Console.CursorVisible = false;

        int pacmanX;
        int pacmanY;
        int pacmanDirectionX = 0;
        int pacmanDirectionY = 0;
        bool isPlaying = true;

        RenderMap(map);

        FindPlayer(map, out pacmanX, out pacmanY);

        while (isPlaying)
        {

            if (Console.KeyAvailable)
            {
                Console.CursorVisible = false;

                SelectDirectionPlayer(ref pacmanDirectionX, ref pacmanDirectionY);

                MovePacman(map, ref pacmanY, ref pacmanX, ref pacmanDirectionX, ref pacmanDirectionY);
            }
        }
    }

    static void RenderMap(string[,] map)
    {
        for (int i = 0; i < map.GetLength(0); i++)
        {
            for (int j = 0; j < map.GetLength(1); j++)
            {
                Console.Write(map[i, j]);
            }

            Console.WriteLine();
        }
    }

    static void FindPlayer(string[,] map, out int pacmanX, out int pacmanY)
    {
        pacmanX = 0;
        pacmanY = 0;

        for (int i = 0; i < map.GetLength(0); i++)
        {
            for (int j = 0; j < map.GetLength(1); j++)
            {
                if (map[i, j] == "@")
                {
                    pacmanX = j;
                    pacmanY = i;
                }
            }
        }

        Console.SetCursorPosition(pacmanX, pacmanY);
    }

    static void SelectDirectionPlayer(ref int pacmanDirectionX, ref int pacmanDirectionY)
    {
        pacmanDirectionX = 0;
        pacmanDirectionY = 0;

        ConsoleKeyInfo key = Console.ReadKey(true);

        switch (key.Key)
        {
            case ConsoleKey.UpArrow:
                pacmanDirectionX = -1;
                break;
            case ConsoleKey.DownArrow:
                pacmanDirectionX = 1;
                break;
            case ConsoleKey.LeftArrow:
                pacmanDirectionY = -1;
                break;
            case ConsoleKey.RightArrow:
                pacmanDirectionY = 1;
                break;
        }
    }

    static void MovePacman(string[,] map, ref int pacmanY, ref int pacmanX, ref int pacmanDirectionX, ref int pacmanDirectionY)
    {
        if (map[pacmanX + pacmanDirectionX, pacmanY + pacmanDirectionY] != "#")
        {
            Console.SetCursorPosition(pacmanY, pacmanX);
            Console.Write(" ");

            pacmanX += pacmanDirectionX;
            pacmanY += pacmanDirectionY;

            Console.SetCursorPosition(pacmanY, pacmanX);
            Console.Write("@");
        }
    }
}